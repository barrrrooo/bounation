<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>bounation</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    html,body{height:100%;margin:0;background:#000}
    model-viewer{width:100%;height:100%;display:block}

    /* top title */
    .title{
      position:fixed;inset:0 auto auto 0;
      padding:12px 16px;color:#fff;font-weight:700;letter-spacing:.3px;
      background:linear-gradient(180deg,rgba(0,0,0,.7),rgba(0,0,0,0));
      z-index:10;user-select:none;pointer-events:none;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    }

    /* bottom scrub bar */
    .bar{
      position:fixed;left:0;right:0;bottom:0;z-index:11;
      padding:10px 16px 16px;background:linear-gradient(180deg,transparent,rgba(0,0,0,.7));
    }
    input[type="range"]{
      width:100%;height:6px;appearance:none;background:#333;border-radius:6px;outline:none
    }
    input[type="range"]::-webkit-slider-thumb{
      appearance:none;width:14px;height:14px;border-radius:50%;background:#fff;border:none;margin-top:-4px
    }
    input[type="range"]::-moz-range-thumb{
      width:14px;height:14px;border-radius:50%;background:#fff;border:none
    }
  </style>
</head>
<body>
  <div class="title">bounation</div>

  <model-viewer id="mv"
    src="./assets/model.glb"
    camera-controls
    autoplay
    animation-loop
    animation-crossfade-duration="300">
  </model-viewer>

  <div class="bar">
    <input id="seek" type="range" min="0" max="1" step="0.001" value="0" />
  </div>

  <script type="module">
    const mv   = document.getElementById('mv');
    const seek = document.getElementById('seek');
    let dragging = false;

    mv.addEventListener('load', () => {
      // pick first animation if none specified
      const clips = mv.availableAnimations || [];
      if (!mv.animationName && clips.length) mv.animationName = clips[0];

      // use actual duration for the slider (seconds)
      if (mv.duration) {
        seek.max  = String(mv.duration);
        seek.step = "0.001";
      }
      mv.play();
    });

    // scrub with the slider
    seek.addEventListener('pointerdown', () => { dragging = true; mv.pause(); });
    seek.addEventListener('input', () => {
      mv.currentTime = parseFloat(seek.value || "0");
    });
    window.addEventListener('pointerup', () => {
      if (dragging) { dragging = false; mv.play(); }
    });

    // keep slider in sync while playing
    (function sync(){
      if (!dragging && mv.duration) seek.value = mv.currentTime.toFixed(3);
      requestAnimationFrame(sync);
    })();
  </script>
</body>
</html>
